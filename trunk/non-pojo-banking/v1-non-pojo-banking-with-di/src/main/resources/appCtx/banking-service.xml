<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE beans PUBLIC "-//SPRING//DTD BEAN//EN"
"http://www.springframework.org/dtd/spring-beans.dtd">

<beans>

    <bean id="accountServiceDelegate"
        class="net.chrisrichardson.bankingExample.client.AccountServiceDelegate">
        <constructor-arg ref="accountService" />
    </bean>

    <bean id="accountService"
        class="net.chrisrichardson.bankingExample.domain.AccountServiceProceduralImpl">
        <constructor-arg ref="accountDao" />
        <constructor-arg ref="bankingTransactionDao" />
        <constructor-arg ref="transactionManager" />
        <constructor-arg ref="auditingManager" />
        <constructor-arg ref="bankingSecurityManagerWrapper" />
    </bean>

    <bean id="accountDao"
        class="net.chrisrichardson.bankingExample.domain.jdbc.JdbcAccountDao">
        <constructor-arg ref="jdbcConnectionManager" />

    </bean>

    <bean id="bankingTransactionDao"
        class="net.chrisrichardson.bankingExample.domain.jdbc.JdbcBankingTransactionDao" />

    <bean id="transactionManager"
        class="net.chrisrichardson.bankingExample.infrastructure.TransactionManager">
        <constructor-arg ref="jdbcConnectionManager" />
    </bean>

    <bean id="auditingManager"
        class="net.chrisrichardson.bankingExample.infrastructure.AuditingManager" />

    <bean id="bankingSecurityManagerWrapper"
        class="net.chrisrichardson.bankingExample.infrastructure.BankingSecurityManagerWrapper" />

    <bean id="jdbcConnectionManager"
        class="net.chrisrichardson.bankingExample.infrastructure.JdbcConnectionManager">
        <constructor-arg ref="dataSource" />
    </bean>

    <bean id="dataSource" lazy-init="true"
        class="org.apache.commons.dbcp.BasicDataSource">
        <property name="driverClassName" value="org.hsqldb.jdbcDriver" />
        <property name="url" value="jdbc:hsqldb:mem:testdb" />
        <property name="username" value="sa" />
        <property name="password" value="" />
    </bean>

</beans>
